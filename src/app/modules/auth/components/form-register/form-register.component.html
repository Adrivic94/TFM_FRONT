<section>
  <h1>Registro</h1>
  <form [formGroup]="formRegister" (ngSubmit)="onSubmit()">
    <h3>¿Cuál va a ser tu perfil?</h3>

    <div class="mb-3">
      <label>
        <input type="radio" formControlName="rol" value="alumn" /> Alumno
      </label>
      <label>
        <input type="radio" formControlName="rol" value="prof" /> Profesor
      </label>
      <p class="error" *ngIf="checkControl('rol', 'required')">
        Selecciona tu perfil
      </p>
    </div>

    <div
      [ngClass]="{
        'form-container': true,
        show:
          formRegister.get('rol')?.value === 'alumn' ||
          formRegister.get('rol')?.value === 'prof'
      }"
    >
      <div class="mb-3">
        <label for="nombre" class="form-label">Nombre</label>
        <input
          type="text"
          class="form-control"
          id="nombre"
          placeholder="Introduce tu nombre"
          formControlName="nombre"
        />
        <p class="error" *ngIf="checkControl('nombre', 'required')">
          Este campo es requerido
        </p>
        <p class="error" *ngIf="checkControl('nombre', 'minlength')">
          Tu nombre debe de contener al menos 3 letras.
        </p>
      </div>

      <div class="mb-3">
        <label for="apellidos" class="form-label">Apellidos</label>
        <input
          type="text"
          class="form-control"
          id="apellidos"
          placeholder="Introduce tus apellidos"
          formControlName="apellidos"
        />
        <p class="error" *ngIf="checkControl('apellidos', 'required')">
          Este campo es requerido
        </p>
        <p class="error" *ngIf="checkControl('apellidos', 'minlength')">
          Tus apellidos debe de contener al menos 3 letras.
        </p>
      </div>

      <div class="mb-3">
        <label for="mail" class="form-label">Email</label>
        <input
          type="text"
          class="form-control"
          id="mail"
          placeholder="Introduce tu email"
          formControlName="mail"
        />
        <p class="error" *ngIf="checkControl('mail', 'required')">
          Este campo es requerido
        </p>
        <p class="error" *ngIf="checkControl('mail', 'pattern')">
          El email tiene formato incorrecto
        </p>
      </div>

      <div class="mb-3">
        <label>
          <input type="checkbox" formControlName="captureLocation" />
          Capturar ubicación
        </label>
      </div>

      <div class="mb-3" *ngIf="formRegister.get('captureLocation')?.value">
        <label for="lat" class="form-label">Latitud</label>
        <input
          type="text"
          class="form-control"
          id="lat"
          placeholder="Latitud"
          formControlName="lat"
          readonly
        />
      </div>

      <div class="mb-3" *ngIf="formRegister.get('captureLocation')?.value">
        <label for="lon" class="form-label">Longitud</label>
        <input
          type="text"
          class="form-control"
          id="lon"
          placeholder="Longitud"
          formControlName="lon"
          readonly
        />
      </div>

      <div class="mb-3">
        <label for="pass" class="form-label">Contraseña</label>
        <input
          type="password"
          class="form-control"
          id="pass"
          placeholder="Introduce tu contraseña"
          formControlName="pass"
        />
        <p class="error" *ngIf="checkControl('pass', 'required')">
          Este campo es requerido
        </p>
        <p class="error" *ngIf="checkControl('pass', 'pattern')">
          Tu contraseña debe de empezar por una letra, contener al menos un dígito y contener al menos 8 caracteres.
        </p>
      </div>

      <div class="mb-3">
        <label for="repeatpassword" class="form-label">Repite la contraseña</label>
        <input
          type="password"
          class="form-control"
          id="repeatpassword"
          placeholder="Repite tu contraseña"
          formControlName="repeatpassword"
        />
        <p
          class="error"
          *ngIf="
            formRegister.get('repeatpassword')?.touched &&
            formRegister.hasError('checkpassword')
          "
        >
          Los campos contraseña y repite la contraseña no coinciden
        </p>
      </div>

      <!-- Nuevos campos -->

      <div class="mb-3">
        <label for="foto" class="form-label">Foto</label>
        <input
          type="text"
          class="form-control"
          id="foto"
          placeholder="URL de la foto"
          formControlName="foto"
        />
      </div>

      <div class="mb-3">
        <label for="tel" class="form-label">Teléfono</label>
        <input
          type="text"
          class="form-control"
          id="tel"
          placeholder="Número de teléfono"
          formControlName="tel"
        />
      </div>

      <div class="mb-3">
        <label for="pxh" class="form-label">Precio por hora</label>
        <input
          type="number"
          class="form-control"
          id="pxh"
          placeholder="Precio por hora"
          formControlName="pxh"
        />
      </div>

      <div class="mb-3">
        <label for="experiencia" class="form-label">Experiencia</label>
        <input
          type="number"
          class="form-control"
          id="experiencia"
          placeholder="Años de experiencia"
          formControlName="experiencia"
        />
      </div>

      <!-- Resto del formulario -->

      <input
        type="submit"
        value="Enviar"
        class="btn btn-info"
        [disabled]="!formRegister.valid"
      />
    </div>
  </form>

  <p class="error">{{ errorMessage }}</p>
</section>



